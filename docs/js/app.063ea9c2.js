(function(e){function t(t){for(var s,i,a=t[0],c=t[1],l=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],s=!0,a=1;a<o.length;a++){var c=o[a];0!==r[c]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=o[0]))}return e}var s={},r={app:0},n=[];function i(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=s,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},5233:function(e,t,o){"use strict";o.r(t),o.d(t,"db",(function(){return i})),o.d(t,"auth",(function(){return a}));var s=o("59ca"),r=(o("e71f"),o("ea7b"),{apiKey:"AIzaSyBNkfHAEHW2A9pzOtzAdraux7WB07T3i6s",authDomain:"whattodo-337c2.firebaseapp.com",databaseURL:"https://whattodo-337c2.firebaseio.com",projectId:"whattodo-337c2",storageBucket:"whattodo-337c2.appspot.com",messagingSenderId:"798748933381",appId:"1:798748933381:web:ccb7c6fee258dc81f1cb6c"}),n=s["initializeApp"](r),i=n.firestore(),a=n.auth()},"545a":function(e,t,o){"use strict";var s=o("a60d"),r=o.n(s);r.a},"56d7":function(e,t,o){"use strict";o.r(t);o("4160"),o("d3b7"),o("ac1f"),o("5319"),o("1276"),o("159b"),o("ddb0"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},n=[],i=o("5530"),a=o("2f62"),c={components:{},computed:Object(i["a"])({},Object(a["b"])(["currentUser"]))},l=c,u=(o("5c0b"),o("2877")),d=Object(u["a"])(l,r,n,!1,null,null,null),p=d.exports,m=(o("45fc"),o("8c4f")),f=o("59ca"),h=o.n(f),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Todos")},v=[],w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("header",{staticClass:"header"},[o("p",[e._v(" Welcome back "+e._s(e.userProfile.name)+" ")]),o("a",{staticClass:"header-btn",on:{click:function(t){return t.preventDefault(),e.logOut(t)}}},[e._v("Log Out")])]),o("div",{staticClass:"container"},[e._m(0),o("section",[o("div",{staticClass:"row"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newTodo,expression:"newTodo"}],staticClass:"input--todo",attrs:{type:"text",placeholder:"Add a task"},domProps:{value:e.newTodo},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addToDo()},input:function(t){t.target.composing||(e.newTodo=t.target.value)}}}),o("button",{staticClass:"svg-wrapper",on:{click:function(t){return t.preventDefault(),e.addToDo(t)}}},[o("svg",{staticClass:"svg svg-green",attrs:{width:24,height:24}},[o("use",e._b({},"use",{"xlink:href":"/feather-sprite.svg#plus"},!1))])])]),o("ul",{staticClass:"todo__items"},e._l(e.filtered,(function(t,s){return o("li",{key:t.id,staticClass:"todo row"},[o("label",{class:{doneTask:t.completed},on:{click:function(t){return e.toggleToDo(s)}}},[e._v(e._s(t.content))]),o("button",{staticClass:"svg-wrapper",on:{click:function(o){return o.preventDefault(),e.deleteTodo(t,s)}}},[o("svg",{staticClass:"svg svg-red",attrs:{width:24,height:24}},[o("use",e._b({},"use",{"xlink:href":"/feather-sprite.svg#x"},!1))])])])})),0)]),o("section",{staticClass:"filters__section"},[o("ul",{staticClass:"row filters__list"},[o("li",[o("a",{class:{selected:"all"==e.filter},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.filter="all"}}},[e._v("All tasks")])]),o("li",[o("a",{class:{selected:"todo"==e.filter},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.filter="todo"}}},[e._v(e._s(e.Todos)+" tasks to do")])]),o("li",[o("a",{class:{selected:"done"==e.filter},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.filter="done"}}},[e._v(e._s(e.doneTodos)+" done tasks")])])])])])])},b=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"title"},[o("h1",[e._v("Todo List")])])}],_=(o("4de4"),o("b0c0"),o("5233")),F={data:function(){return{newTodo:"",bdTodo:{},filter:"all"}},methods:{toggleToDo:function(e){this.userTodos[e].completed=!this.userTodos[e].completed,_.db.collection("todos").doc(this.userTodos[e].id).update({completed:this.userTodos[e].completed})},addToDo:function(){if(this.newTodo.length>0){var e=_.db.collection("todos").doc();this.bdTodo={id:e.id,content:this.newTodo,createdOn:new Date,completed:!1,userName:this.userProfile.name,userId:this.currentUser.uid},this.userTodos.push(this.bdTodo),e.set(this.bdTodo),this.newTodo="",this.bdTodo=""}},deleteTodo:function(e){_.db.collection("todos").doc(e.id).delete()},logOut:function(){var e=this;_.auth.signOut().then((function(){e.$store.dispatch("clearData"),e.$router.push("/login")}))}},computed:Object(i["a"])(Object(i["a"])({},Object(a["b"])(["userProfile","currentUser","userTodos"])),{},{Todos:function(){return this.userTodos.filter((function(e){return!e.completed})).length},doneTodos:function(){return this.userTodos.filter((function(e){return e.completed})).length},filtered:function(){return"todo"===this.filter?this.userTodos.filter((function(e){return!e.completed})):"done"==this.filter?this.userTodos.filter((function(e){return e.completed})):this.userTodos}})},C=F,T=(o("784f"),Object(u["a"])(C,w,b,!1,null,"120689c1",null)),P=T.exports,U={components:{Todos:P}},y=U,k=Object(u["a"])(y,g,v,!1,null,null,null),O=k.exports,D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:{"signup-form":!e.showLoginForm&&!e.showForgotPassword}},[o("transition",{attrs:{name:"fade"}},[e.performingRequest?o("div",{staticClass:"loading"},[o("p",[e._v("...loading")])]):e._e()]),e.showLoginForm?o("form",{staticClass:"container",on:{submit:function(e){e.preventDefault()}}},[o("h1",[e._v("Login")]),o("div",{staticClass:"row-col"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.email,expression:"loginForm.email"}],staticClass:"input",attrs:{type:"email",name:"email",id:"email",placeholder:"email",required:""},domProps:{value:e.loginForm.email},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"email",t.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],staticClass:"input",attrs:{type:"password",name:"password",id:"password",placeholder:"password",required:""},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),o("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.logIn(t)}}},[e._v("Log In")])]),o("div",{staticClass:"formBtn"},[o("a",{staticClass:"btn-blue",on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("Create an account")]),o("a",{staticClass:"btn-blue",on:{click:e.togglePasswordReset}},[e._v("Forgot Password")])])]):e._e(),e.showLoginForm||e.showForgotPassword?e._e():o("form",{staticClass:"container",on:{submit:function(e){e.preventDefault()}}},[o("h1",[e._v("SignUp")]),o("div",{staticClass:"row-col"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.signUpForm.email,expression:"signUpForm.email"}],staticClass:"input",attrs:{type:"email",name:"email",id:"email",placeholder:"email",required:""},domProps:{value:e.signUpForm.email},on:{input:function(t){t.target.composing||e.$set(e.signUpForm,"email",t.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.signUpForm.name,expression:"signUpForm.name"}],staticClass:"input",attrs:{type:"text",name:"name",id:"name",placeholder:"name",required:""},domProps:{value:e.signUpForm.name},on:{input:function(t){t.target.composing||e.$set(e.signUpForm,"name",t.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.signUpForm.password,expression:"signUpForm.password"}],staticClass:"input",attrs:{type:"password",name:"password",id:"password",placeholder:"password",required:""},domProps:{value:e.signUpForm.password},on:{input:function(t){t.target.composing||e.$set(e.signUpForm,"password",t.target.value)}}}),o("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.SignUp(t)}}},[e._v("Sign Up")])]),o("div",{staticClass:"formBtn"},[o("a",{staticClass:"btn-blue",on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("Log In")])])]),e.showForgotPassword?o("form",{staticClass:"password-reset container",on:{submit:function(e){e.preventDefault()}}},[e.passwordResetSuccess?o("div",[o("h1",[e._v("Email Sent")]),o("p",[e._v("Check your email to reset your password")]),o("button",{staticClass:"btn-blue",on:{click:function(t){return t.preventDefault(),e.togglePasswordReset(t)}}},[e._v("Log In")])]):o("div",[o("h1",[e._v("Reset Password")]),o("p",{staticClass:"form-text"},[e._v("We will send you an email to reset your password")]),o("div",{staticClass:"row-col"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordForm.email,expression:"passwordForm.email"}],staticClass:"input",attrs:{type:"email",name:"resetEmail",id:"resetEmail",placeholder:"your@email.com",required:""},domProps:{value:e.passwordForm.email},on:{input:function(t){t.target.composing||e.$set(e.passwordForm,"email",t.target.value)}}}),o("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.resetPassword(t)}}},[e._v("Submit")]),o("div",{staticClass:"formBtn"}),o("a",{staticClass:"btn-blue",on:{click:function(t){return t.preventDefault(),e.togglePasswordReset(t)}}},[e._v("Log In")])])])]):e._e(),o("transition",{attrs:{name:"fade"}},[""!==e.errorMsg?o("div",{staticClass:"error-msg"},[o("p",[e._v(e._s(e.errorMsg))])]):e._e()])],1)},x=[],q=o("5233"),R={data:function(){return{loginForm:{email:"",password:""},signUpForm:{email:"",name:"",password:""},passwordForm:{email:""},showLoginForm:!0,showForgotPassword:!1,passwordRequestSuccess:!1,performingRequest:!1,errorMsg:""}},methods:{toggleForm:function(){this.erroMsg="",this.showLoginForm=!this.showLoginForm},togglePasswordReset:function(){this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordRequestSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},logIn:function(){var e=this;this.performingRequest=!0,q.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then((function(t){e.$store.commit("setCurrentUser",t.user),e.$store.dispatch("fetchUserProfile"),e.performingRequest=!1,e.$router.push("/")})).catch((function(t){e.performingRequest=!1,e.errorMsg=t.message}))},SignUp:function(){var e=this;this.performingRequest=!0,q.auth.createUserWithEmailAndPassword(this.signUpForm.email,this.signUpForm.password).then((function(t){e.$store.commit("setCurrentUser",t.user),q.db.collection("users").doc(t.user.uid).set({name:e.signUpForm.name,email:e.signUpForm.email})})).then((function(){e.$store.dispatch("fetchUserProfile"),e.$router.push("/")})).catch((function(t){console.log(t.code),console.log(t.message),e.performingRequest=!1}))},resetPassword:function(){var e=this;this.performingRequest=!0,q.auth.sendPasswordResetEmail(this.passwordForm.email).then((function(){e.performingRequest=!1,e.passwordRequestSuccess=!0,e.passwordForm.email=""})).catch((function(t){console.log(t),e.performingRequest=!1,e.errorMsg=t.message}))}}},$=R,S=(o("545a"),Object(u["a"])($,D,x,!1,null,"82849f5a",null)),j=S.exports;s["a"].use(m["a"]);var E=[{path:"*",redirect:"/"},{path:"/login",name:"Login",component:j},{path:"/",name:"Home",component:O,meta:{requiresAuth:!0}}],L=new m["a"]({mode:"history",routes:E});L.beforeEach((function(e,t,o){var s=e.matched.some((function(e){return e.meta.requiresAuth})),r=h.a.auth().currentUser;s&&!r?o("/login"):o()}));var I=L,A=o("5233");s["a"].use(a["a"]),A.auth.onAuthStateChanged((function(e){e&&(M.commit("setCurrentUser",e),M.dispatch("fetchUserProfile"),A.db.collection("todos").orderBy("createdOn","asc").onSnapshot((function(t){var o=[];t.forEach((function(t){var s=t.data();s.userId===e.uid&&o.push(s)})),M.commit("setTodos",o)})))}));var M=new a["a"].Store({state:{currentUser:null,userProfile:{},userTodos:[]},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setUserProfile:function(e,t){e.userProfile=t},setTodos:function(e,t){e.userTodos=t}},actions:{clearData:function(e){var t=e.commit;t("setCurrentUser",null),t("setUserProfil",{})},fetchUserProfile:function(e){var t=e.commit,o=e.state;A.db.collection("users").doc(o.currentUser.uid).get().then((function(e){t("setUserProfile",e.data())})).catch((function(e){console.log(e)}))}},modules:{}}),N=M,B=o("8103"),W=o.n(B),z=o("bba4"),H=o.n(z),J=o("ef13");J.keys().forEach((function(e){var t=J(e),o=W()(H()(e.split("/").pop().replace(/\.\w+$/,"")));s["a"].component(o,t.default||t)})),s["a"].config.productionTip=!1,new s["a"]({router:I,store:N,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var s=o("9c0c"),r=o.n(s);r.a},"784f":function(e,t,o){"use strict";var s=o("aec4"),r=o.n(s);r.a},"9c0c":function(e,t,o){},a60d:function(e,t,o){},aec4:function(e,t,o){},ef13:function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id="ef13"}});
//# sourceMappingURL=app.063ea9c2.js.map